{
    "version": "16.4.2.112",
    "description": "A free to use bangumi player with danmaku support.",
    "homepage": "https://www.dandanplay.com/",
    "license": "Apache-2.0",
    "architecture": {
        "64bit": {
            "url": "https://github.com/kaedei/dandanplay/releases/download/windows-16.4.2.112/dandanplay-x64_16.4.2.zip",
            "hash": "313dd748f2686038459a3a4e81400185b21f3cc061c41d3ea2c63a32e037f152",
            "extract_dir": "dandanplay-x64"
        }
    },
    "pre_install": [
        "if (!(Test-Path \"$persist_dir\\Config\")) {",
        "    New-Item \"$dir\\Config\" -ItemType Directory | Out-Null",
        "}",
        "# Disable auto update",
        "if (!(Test-Path \"$persist_dir\\Config\\ConnectionSettings.xml\")) {",
        "    New-Item \"$dir\\Config\\ConnectionSettings.xml\" -ItemType File -Value '<?xml version=\"1.0\"?><ConnectionSettings><EnableAutoUpdate>false</EnableAutoUpdate><NotifyOnUpdateDownloaded>false</NotifyOnUpdateDownloaded></ConnectionSettings>' | Out-Null",
        "}",
        "# Disable telemetry",
        "if (!(Test-Path \"$persist_dir\\Config\\UserSettings.xml\")) {",
        "    New-Item \"$dir\\Config\\UserSettings.xml\" -ItemType File -Value '<?xml version=\"1.0\"?><UserSettings><EnableTelemetry>false</EnableTelemetry></UserSettings>' | Out-Null",
        "}"
    ],
    "shortcuts": [
        [
            "dandanplay.exe",
            "弹弹play"
        ]
    ],
    "persist": [
        "Cache",
        "Config",
        "dandanplay.exe.WebView2",
        "Log"
    ],
    "checkver": {
        "url": "https://github.com/kaedei/dandanplay/tags",
        "regex": ">windows-([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/kaedei/dandanplay/releases/download/windows-$version/dandanplay-x64_$matchHead.zip",
                "extract_dir": "dandanplay-x64"
            }
        }
    }
}
